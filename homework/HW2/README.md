# Модуль "Учет финансов" для HSE-Банк

### a. Общая идея решения

Реализован модуль финансового учета с следующими возможностями:

**Основной функционал:**
- Создание, редактирование и удаление банковских счетов
- Управление категориями доходов/расходов
- Учет финансовых операций (доходы/расходы)
- Автоматический пересчет баланса счетов при операциях

**Дополнительный функционал:**
- Аналитика: расчет разницы доходов/расходов, группировка по категориям
- Экспорт данных в JSON формат
- Измерение времени выполнения операций
- Валидация данных при создании объектов

**Изменения в требованиях:** Добавлен паттерн Наблюдатель для уведомлений об изменении баланса.

### b. Принципы SOLID и GRASP

#### SOLID принципы:

1. **Single Responsibility Principle (SRP)**
    - `BankAccountFacade` - управление счетами
    - `CategoryFacade` - управление категориями
    - `OperationFacade` - управление операциями
    - `AnalyticsFacade` - аналитика финансов
    - Каждый класс отвечает за одну зону ответственности

2. **Open/Closed Principle (OCP)**
    - `Command` интерфейс позволяет добавлять новые команды без изменения существующего кода
    - `DataExportVisitor` позволяет добавлять новые форматы экспорта

3. **Liskov Substitution Principle (LSP)**
    - Все реализации `Command` взаимозаменяемы
    - `BankAccountRepositoryProxy` может заменять `DatabaseBankAccountRepository`

4. **Interface Segregation Principle (ISP)**
    - `Command` - только методы execute() и getName()
    - `DataExportVisitor` - отдельные методы для каждого типа данных

5. **Dependency Inversion Principle (DIP)**
    - Зависимости внедряются через конструкторы
    - Использование Spring DI контейнера в `AppConfig`

#### GRASP принципы:

1. **High Cohesion**
    - Каждый фасад сфокусирован на своей предметной области
    - `DomainFactory` отвечает только за создание объектов

2. **Low Coupling**
    - Фасады уменьшают зависимости между компонентами
    - DI контейнер управляет связями между объектами

3. **Creator**
    - `DomainFactory` создает все доменные объекты
    - Централизованная валидация при создании

4. **Controller**
    - Фасады выступают в роли контроллеров для своих доменных областей
    - `Main` класс координирует работу системы

### c. Паттерны GoF

#### 1. Фасад (Structural)
- **Классы:** `BankAccountFacade`, `CategoryFacade`, `OperationFacade`, `AnalyticsFacade`
- **Важность:** Упрощает сложную систему, предоставляя простой интерфейс для клиентов
- **Реализация:** Каждый фасад объединяет связанные методы работы с определенной сущностью

#### 2. Команда (Behavioral)
- **Классы:** `Command`, `CreateAccountCommand`, `CreateOperationCommand`
- **Важность:** Инкапсулирует запросы как объекты, позволяя параметризовать клиенты с различными запросами
- **Реализация:** Каждая операция представлена как команда с методом execute()

#### 3. Декоратор (Structural)
- **Классы:** `TimingDecorator`
- **Важность:** Динамически добавляет новую функциональность объектам
- **Реализация:** Обертывает команды для измерения времени выполнения

#### 4. Шаблонный метод (Behavioral)
- **Классы:** `DataImporter`, `JsonDataImporter`
- **Важность:** Определяет скелет алгоритма, позволяя подклассам переопределять определенные шаги
- **Реализация:** Общий процесс импорта с абстрактным методом парсинга

#### 5. Посетитель (Behavioral)
- **Классы:** `DataExportVisitor`, `JsonExportVisitor`
- **Важность:** Позволяет добавлять новые операции к объектам без изменения их классов
- **Реализация:** Посещение различных типов данных для экспорта в JSON

#### 6. Фабрика (Creational)
- **Классы:** `DomainFactory`
- **Важность:** Централизует создание объектов, обеспечивая валидацию и согласованность
- **Реализация:** Создание BankAccount, Category, Operation с проверкой бизнес-правил

#### 7. Прокси (Structural)
- **Классы:** `BankAccountRepository`, `BankAccountRepositoryProxy`, `DatabaseBankAccountRepository`
- **Важность:** Контролирует доступ к объекту, обеспечивая дополнительную функциональность
- **Реализация:** In-memory кэш для ускорения доступа к данным счетов

#### 8. Наблюдатель (Behavioral)
- **Классы:** `BalanceObserver`, `BalanceLogger`, `BalanceNotifier`
- **Важность:** Определяет зависимость "один-ко-многим" между объектами
- **Реализация:** Уведомления об изменении баланса счетов

## Инструкция по запуску

### Требования:
- Java 11 или выше
- Gradle 7.0 или выше

### Запуск приложения:

```bash
# Сборка проекта
./gradlew clean build
```
```bash
# Запуск приложения
./gradlew run
```